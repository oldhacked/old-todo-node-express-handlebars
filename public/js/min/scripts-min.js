$("#menu-toggle").click(function(e){e.preventDefault(),$("#wrapper").toggleClass("toggled"),$("#wrapper").toggleClass("bumpRight")}),$("#new-task").click(function(){console.log("inside expand new task"),$(".closeMe").on("click",function(e){e.preventDefault(),$(".new-task-form").fadeTo(5,0),$("#new-task-top").fadeTo(2,0,"swing"),setTimeout(function(){$("#new-task-top").animate({height:0,margin:0},2)},300)}),$("#new-task-top").animate({height:300,margin:5},2),$("#new-task-top").fadeTo(2,1,"swing"),setTimeout(function(){$(".new-task-form").fadeTo(2e3,1,"swing")},200)}),$(".task").click(function(e){e.preventDefault(),console.log("canvas node height: "+canvas.height),170!=canvas.width&&(canvas.width=170,canvas.height=170);var t=$(".closeMee").parent().closest("div").parent(),a=$(".edit-task-form").height()+10,n=$("#edit-task").height();$(t).fadeTo(3,1,"swing"),$(t).animate({height:a+10,margin:5},2),$(window).resize(function(){$(t).animate({height:$(".edit-task-form").height()+20,margin:5},1)});var l=$(this).attr("hours");console.log(l),$(document).ready(function(){var e=0;$(".hoursValue").each(function(){var t=$.trim($(this).text());t&&(t=parseFloat(t.replace(/^\$/,"")),e+=isNaN(t)?0:t)}),console.log("total sum"+e);var t=e-l;console.log("relative "+t);var a=parseInt(l),n=parseInt(t);console.log("parsed hours: "+a+" parsed relative: "+n),console.log("hours inside of funciton: "+l);var o=[{value:a,color:"#5BC4BF"},{value:n,color:"#ededed"}],i=new Chart(document.getElementById("canvas").getContext("2d")).Doughnut(o,{percentageInnerCutout:90})}),setTimeout(function(){$(".edit-task-form").fadeTo(2e3,1,"swing")},200);var o=$(this).attr("taskid"),i=$(this).attr("project_id"),s=$(this).attr("title"),r=$(this).attr("hours"),c=$(this).attr("notes");console.log("this hours amount"+r),console.log("----------------------------------"),$("#project_id").val(i),$("#new_project_id").val(i),$("#id").val(o),$("#tasktitle").val(s),$("#taskhours").val(r),$("#tasknotes").val(c),$("#delete-task").val(o),$("#edit-toggle").click(function(e){if(e.preventDefault(),$(".inside-project-form").attr("readonly")){$(".inside-project-form").attr("readonly",!$(".inside-project-form").attr("readonly")),$(".inside-project-form").css({background:"#f7f8f8","border-color":"#fafafa","border-width":"2px","border-style":"solid"}),$("#hours-title").show(),$(".hourInput").show(),$("#delete-task").show(),$("#delete-task").fadeTo("slow",1),$(this).text("Cancel"),$("#task-submit-change").show(),$("#task-submit-change").fadeTo("slow",1);var t=document.getElementById("delete-task");t.addEventListener("click",deleteMe)}else $(".inside-project-form").attr("readonly",!$(".inside-project-form").attr("readonly")),$(".inside-project-form").css({background:"#f7f8f8","border-color":"transparent","border-width":"0px","border-style":"solid"}),$("#delete-task").fadeTo("slow",0),$("#delete-task").hide(),$(this).text("Edit"),$("#task-submit-change").fadeTo("slow",0),$("#task-submit-change").hide(),$(".hourInput").hide(),$("#hours-title").hide()}),$(".closeMee").on("click",function(e){e.preventDefault(),$(".edit-task-form").fadeTo(.5,0),$(t).fadeTo(2,0,"swing"),setTimeout(function(){$(t).animate({height:0,margin:0},4)},300)})});var deleteMe=function(e){e.preventDefault(),console.log("deleteeeeeeeeee"+$("#delete-task").val());var t=new XMLHttpRequest;t.open("DELETE","/deleteTask/"+$("#delete-task").val()),t.onreadystatechange=function(){4===t.readyState&&t.status<400&&(console.log("inside of readystate change for edit task"),location.reload()),4===t.readyState&&t.status>=400&&console.error(t.status+": "+t.responseText)},t.send(null)};$("#dp").on("click",function(e){e.preventDefault(),console.log(" inside delete project script"),console.log("deleteeeeeeeeee"+$("#projectId").val());var t=new XMLHttpRequest;t.open("DELETE","/deleteProject/"+$("#projectId").val()),t.onreadystatechange=function(){4===t.readyState&&t.status<400&&console.log("inside of readystate change for delete project"),4===t.readyState&&t.status>=400&&console.error(t.status+": "+t.responseText)},t.send(null),window.location.assign("/")});var newTaskSubmit=document.getElementById("new-task-submit");newTaskSubmit.addEventListener("click",function(e){e.preventDefault(),console.log("title:"+$("#newtasktitle").val()),console.log("project_id:"+$("#new_project_id").val());var t={title:$("#newtasktitle").val(),hours:$("#newtaskhours").val(),notes:$("#newtasknotes").val(),project_id:$("#new_project_id").val()},a=JSON.stringify(t),n=new XMLHttpRequest;n.open("POST","/newTask/"+t.project_id),n.setRequestHeader("Content-type","application/json"),n.onreadystatechange=function(){4===n.readyState&&n.status<400&&(console.log(n.status),console.log("inside of readystate change for new task"),location.reload()),4===n.readyState&&n.status>=400&&console.error(n.status+": "+n.responseText)},n.send(a)});var taskSubmitChange=document.getElementById("task-submit-change");taskSubmitChange.addEventListener("click",function(e){e.preventDefault(),console.log("title:"+$("#tasktitle").val());var t={project_id:$("#project_id").val(),id:$("#id").val(),title:$("#tasktitle").val(),hours:$("#taskhours").val(),notes:$("#tasknotes").val()},a=JSON.stringify(t),n=new XMLHttpRequest;n.open("PUT","/editTask/"+t.id),n.setRequestHeader("Content-type","application/json"),n.onreadystatechange=function(){4===n.readyState&&n.status<400&&(console.log(n.status),console.log("inside of readystate change for edit task"),location.reload()),4===n.readyState&&n.status>=400&&console.error(n.status+": "+n.responseText)},n.send(a)}),window.Chart=function(e){function t(e,t,a){var n=t.steps*t.stepValue,l=e-t.graphMin,o=c(l/n,1,0);return a*t.steps*o}function a(e,t,a,n){function l(){var l=e.animation?c(s(r),null,0):1;m(n),e.scaleOverlay?(a(l),t()):(t(),a(l))}function o(){r+=i,l(),1>=r?y(o):"function"==typeof e.onAnimationComplete&&e.onAnimationComplete()}var i=e.animation?1/c(e.animationSteps,Number.MAX_VALUE,1):1,s=p[e.animationEasing],r=e.animation?0:1;"function"!=typeof t&&(t=function(){}),y(o)}function n(e,t,a,n,o,i){function s(e){return Math.floor(Math.log(e)/Math.LN10)}var r,c,d,u,h,f,p,S;for(f=n-o,p=s(f),r=Math.floor(o/(1*Math.pow(10,p)))*Math.pow(10,p),c=Math.ceil(n/(1*Math.pow(10,p)))*Math.pow(10,p),d=c-r,u=Math.pow(10,p),h=Math.round(d/u);a>h||h>t;)a>h?(u/=2,h=Math.round(d/u)):(u*=2,h=Math.round(d/u));var g=[];return l(i,g,h,r,u),{steps:h,stepValue:u,graphMin:r,labels:g}}function l(e,t,a,n,l){if(e)for(var o=1;a+1>o;o++)t.push(h(e,{value:(n+l*o).toFixed(d(l))}))}function o(e){return Math.max.apply(Math,e)}function i(e){return Math.min.apply(Math,e)}function s(e,t){return e?e:t}function r(e){return!isNaN(parseFloat(e))&&isFinite(e)}function c(e,t,a){return r(t)&&e>t?t:r(a)&&a>e?a:e}function d(e){var t;return e%1!=0?e.toString().split(".")[1].length:0}function u(e,t){var a={};for(var n in e)a[n]=e[n];for(var n in t)a[n]=t[n];return a}function h(e,t){var a=/\W/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):F[e]=F[e]||h(document.getElementById(e).innerHTML);return t?a(t):a}var f=this,p={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-1*e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-0.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1*((e=e/1-1)*e*e+1)},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-1*((e=e/1-1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-0.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return 1*(e/=1)*e*e*e*e},easeOutQuint:function(e){return 1*((e=e/1-1)*e*e*e*e+1)},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return-1*Math.cos(e/1*(Math.PI/2))+1},easeOutSine:function(e){return 1*Math.sin(e/1*(Math.PI/2))},easeInOutSine:function(e){return-0.5*(Math.cos(Math.PI*e/1)-1)},easeInExpo:function(e){return 0==e?1:1*Math.pow(2,10*(e/1-1))},easeOutExpo:function(e){return 1==e?1:1*(-Math.pow(2,-10*e/1)+1)},easeInOutExpo:function(e){return 0==e?0:1==e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(-Math.pow(2,-10*--e)+2)},easeInCirc:function(e){return e>=1?e:-1*(Math.sqrt(1-(e/=1)*e)-1)},easeOutCirc:function(e){return 1*Math.sqrt(1-(e=e/1-1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,a=0,n=1;if(0==e)return 0;if(1==(e/=1))return 1;if(a||(a=.3),n<Math.abs(1)){n=1;var t=a/4}else var t=a/(2*Math.PI)*Math.asin(1/n);return-(n*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/a))},easeOutElastic:function(e){var t=1.70158,a=0,n=1;if(0==e)return 0;if(1==(e/=1))return 1;if(a||(a=.3),n<Math.abs(1)){n=1;var t=a/4}else var t=a/(2*Math.PI)*Math.asin(1/n);return n*Math.pow(2,-10*e)*Math.sin((1*e-t)*(2*Math.PI)/a)+1},easeInOutElastic:function(e){var t=1.70158,a=0,n=1;if(0==e)return 0;if(2==(e/=.5))return 1;if(a||(a=1*(.3*1.5)),n<Math.abs(1)){n=1;var t=a/4}else var t=a/(2*Math.PI)*Math.asin(1/n);return 1>e?-.5*(n*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/a)):n*Math.pow(2,-10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/a)*.5+1},easeInBack:function(e){var t=1.70158;return 1*(e/=1)*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return 1*((e=e/1-1)*e*((t+1)*e+t)+1)},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:function(e){return 1-p.easeOutBounce(1-e)},easeOutBounce:function(e){return(e/=1)<1/2.75?1*(7.5625*e*e):2/2.75>e?1*(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?1*(7.5625*(e-=2.25/2.75)*e+.9375):1*(7.5625*(e-=2.625/2.75)*e+.984375)},easeInOutBounce:function(e){return.5>e?.5*p.easeInBounce(2*e):.5*p.easeOutBounce(2*e-1)+.5}},S=e.canvas.width,g=e.canvas.height;window.devicePixelRatio&&(e.canvas.style.width=S+"px",e.canvas.style.height=g+"px",e.canvas.height=g*window.devicePixelRatio,e.canvas.width=S*window.devicePixelRatio,e.scale(window.devicePixelRatio,window.devicePixelRatio)),this.PolarArea=function(t,a){f.PolarArea.defaults={scaleOverlay:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null};var n=a?u(f.PolarArea.defaults,a):f.PolarArea.defaults;return new v(t,n,e)},this.Radar=function(t,a){f.Radar.defaults={scaleOverlay:!1,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!1,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,angleShowLineOut:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:12,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null};var n=a?u(f.Radar.defaults,a):f.Radar.defaults;return new b(t,n,e)},this.Pie=function(t,a){f.Pie.defaults={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null};var n=a?u(f.Pie.defaults,a):f.Pie.defaults;return new k(t,n,e)},this.Doughnut=function(t,a){f.Doughnut.defaults={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null,labelFontFamily:"Arial",labelFontStyle:"normal",labelFontSize:24,labelFontColor:"#666",responsive:!0,maintainAspectRatio:!0};var n=a?u(f.Doughnut.defaults,a):f.Doughnut.defaults;return new w(t,n,e)},this.Line=function(t,a){f.Line.defaults={scaleOverlay:!1,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:2,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null};var n=a?u(f.Line.defaults,a):f.Line.defaults;return new M(t,n,e)},this.Bar=function(t,a){f.Bar.defaults={scaleOverlay:!1,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null};var n=a?u(f.Bar.defaults,a):f.Bar.defaults;return new L(t,n,e)};var m=function(e){e.clearRect(0,0,S,g)},v=function(e,r,c){function d(){p=i([S,g])/2,p-=o([.5*r.scaleFontSize,.5*r.scaleLineWidth]),b=2*r.scaleFontSize,r.scaleShowLabelBackdrop&&(b+=2*r.scaleBackdropPaddingY,p-=1.5*r.scaleBackdropPaddingY),k=p,b=s(b,5)}function u(){for(var e=0;e<v.steps;e++)if(r.scaleShowLine&&(c.beginPath(),c.arc(S/2,g/2,m*(e+1),0,2*Math.PI,!0),c.strokeStyle=r.scaleLineColor,c.lineWidth=r.scaleLineWidth,c.stroke()),r.scaleShowLabels){c.textAlign="center",c.font=r.scaleFontStyle+" "+r.scaleFontSize+"px "+r.scaleFontFamily;var t=v.labels[e];if(r.scaleShowLabelBackdrop){var a=c.measureText(t).width;c.fillStyle=r.scaleBackdropColor,c.beginPath(),c.rect(Math.round(S/2-a/2-r.scaleBackdropPaddingX),Math.round(g/2-m*(e+1)-.5*r.scaleFontSize-r.scaleBackdropPaddingY),Math.round(a+2*r.scaleBackdropPaddingX),Math.round(r.scaleFontSize+2*r.scaleBackdropPaddingY)),c.fill()}c.textBaseline="middle",c.fillStyle=r.scaleFontColor,c.fillText(t,S/2,g/2-m*(e+1))}}function h(a){var n=-Math.PI/2,l=2*Math.PI/e.length,o=1,i=1;r.animation&&(r.animateScale&&(o=a),r.animateRotate&&(i=a));for(var s=0;s<e.length;s++)c.beginPath(),c.arc(S/2,g/2,o*t(e[s].value,v,m),n,n+i*l,!1),c.lineTo(S/2,g/2),c.closePath(),c.fillStyle=e[s].color,c.fill(),r.segmentShowStroke&&(c.strokeStyle=r.segmentStrokeColor,c.lineWidth=r.segmentStrokeWidth,c.stroke()),n+=i*l}function f(){for(var t=Number.MIN_VALUE,a=Number.MAX_VALUE,n=0;n<e.length;n++)e[n].value>t&&(t=e[n].value),e[n].value<a&&(a=e[n].value);var l=Math.floor(k/(.66*b)),o=Math.floor(k/b*.5);return{maxValue:t,minValue:a,maxSteps:l,minSteps:o}}var p,m,v,b,k,w,M;d(),w=f(),M=r.scaleShowLabels?r.scaleLabel:null,r.scaleOverride?(v={steps:r.scaleSteps,stepValue:r.scaleStepWidth,graphMin:r.scaleStartValue,labels:[]},l(M,v.labels,v.steps,r.scaleStartValue,r.scaleStepWidth)):v=n(k,w.maxSteps,w.minSteps,w.maxValue,w.minValue,M),m=p/v.steps,a(r,u,h,c)},b=function(e,r,d){function u(a){var n=2*Math.PI/e.datasets[0].data.length;d.save(),d.translate(S/2,g/2);for(var l=0;l<e.datasets.length;l++){d.beginPath(),d.moveTo(0,a*(-1*t(e.datasets[l].data[0],b,v)));for(var o=1;o<e.datasets[l].data.length;o++)d.rotate(n),d.lineTo(0,a*(-1*t(e.datasets[l].data[o],b,v)));if(d.closePath(),d.fillStyle=e.datasets[l].fillColor,d.strokeStyle=e.datasets[l].strokeColor,d.lineWidth=r.datasetStrokeWidth,d.fill(),d.stroke(),r.pointDot){d.fillStyle=e.datasets[l].pointColor,d.strokeStyle=e.datasets[l].pointStrokeColor,d.lineWidth=r.pointDotStrokeWidth;for(var i=0;i<e.datasets[l].data.length;i++)d.rotate(n),d.beginPath(),d.arc(0,a*(-1*t(e.datasets[l].data[i],b,v)),r.pointDotRadius,2*Math.PI,!1),d.fill(),d.stroke()}d.rotate(n)}d.restore()}function h(){var t=2*Math.PI/e.datasets[0].data.length;if(d.save(),d.translate(S/2,g/2),r.angleShowLineOut){d.strokeStyle=r.angleLineColor,d.lineWidth=r.angleLineWidth;for(var a=0;a<e.datasets[0].data.length;a++)d.rotate(t),d.beginPath(),d.moveTo(0,0),d.lineTo(0,-m),d.stroke()}for(var n=0;n<b.steps;n++){if(d.beginPath(),r.scaleShowLine){d.strokeStyle=r.scaleLineColor,d.lineWidth=r.scaleLineWidth,d.moveTo(0,-v*(n+1));for(var l=0;l<e.datasets[0].data.length;l++)d.rotate(t),d.lineTo(0,-v*(n+1));d.closePath(),d.stroke()}if(r.scaleShowLabels){if(d.textAlign="center",d.font=r.scaleFontStyle+" "+r.scaleFontSize+"px "+r.scaleFontFamily,d.textBaseline="middle",r.scaleShowLabelBackdrop){var o=d.measureText(b.labels[n]).width;d.fillStyle=r.scaleBackdropColor,d.beginPath(),d.rect(Math.round(-o/2-r.scaleBackdropPaddingX),Math.round(-v*(n+1)-.5*r.scaleFontSize-r.scaleBackdropPaddingY),Math.round(o+2*r.scaleBackdropPaddingX),Math.round(r.scaleFontSize+2*r.scaleBackdropPaddingY)),d.fill()}d.fillStyle=r.scaleFontColor,d.fillText(b.labels[n],0,-v*(n+1))}}for(var i=0;i<e.labels.length;i++){d.font=r.pointLabelFontStyle+" "+r.pointLabelFontSize+"px "+r.pointLabelFontFamily,d.fillStyle=r.pointLabelFontColor;var s=Math.sin(t*i)*(m+r.pointLabelFontSize),c=Math.cos(t*i)*(m+r.pointLabelFontSize);t*i==Math.PI||t*i==0?d.textAlign="center":t*i>Math.PI?d.textAlign="right":d.textAlign="left",d.textBaseline="middle",d.fillText(e.labels[i],s,-c)}d.restore()}function f(){m=i([S,g])/2,k=2*r.scaleFontSize;for(var t=0,a=0;a<e.labels.length;a++){d.font=r.pointLabelFontStyle+" "+r.pointLabelFontSize+"px "+r.pointLabelFontFamily;var n=d.measureText(e.labels[a]).width;n>t&&(t=n)}m-=o([t,r.pointLabelFontSize/2*1.5]),m-=r.pointLabelFontSize,m=c(m,null,0),w=m,k=s(k,5)}function p(){for(var t=Number.MIN_VALUE,a=Number.MAX_VALUE,n=0;n<e.datasets.length;n++)for(var l=0;l<e.datasets[n].data.length;l++)e.datasets[n].data[l]>t&&(t=e.datasets[n].data[l]),e.datasets[n].data[l]<a&&(a=e.datasets[n].data[l]);var o=Math.floor(w/(.66*k)),i=Math.floor(w/k*.5);return{maxValue:t,minValue:a,maxSteps:o,minSteps:i}}var m,v,b,k,w,M,L;e.labels||(e.labels=[]),f();var M=p();L=r.scaleShowLabels?r.scaleLabel:null,r.scaleOverride?(b={steps:r.scaleSteps,stepValue:r.scaleStepWidth,graphMin:r.scaleStartValue,labels:[]},l(L,b.labels,b.steps,r.scaleStartValue,r.scaleStepWidth)):b=n(w,M.maxSteps,M.minSteps,M.maxValue,M.minValue,L),v=m/b.steps,a(r,h,u,d)},k=function(e,t,n){function l(a){var l=-Math.PI/2,i=1,r=1;t.animation&&(t.animateScale&&(i=a),t.animateRotate&&(r=a));for(var c=0;c<e.length;c++){var d=r*(e[c].value/o*(2*Math.PI));n.beginPath(),n.arc(S/2,g/2,i*s,l,l+d),n.lineTo(S/2,g/2),n.closePath(),n.fillStyle=e[c].color,n.fill(),t.segmentShowStroke&&(n.lineWidth=t.segmentStrokeWidth,n.strokeStyle=t.segmentStrokeColor,n.stroke()),l+=d}}for(var o=0,s=i([g/2,S/2])-5,r=0;r<e.length;r++)o+=e[r].value;a(t,null,l,n)},w=function(e,t,n){function l(a){n.font=t.labelFontStyle+" "+t.labelFontSize+"px "+t.labelFontFamily,n.fillStyle="black",n.textBaseline="middle",n.fillText(e[0].value+"hr",S/2-20,S/2,200);var l=-Math.PI/2,i=1,c=1;t.animation&&(t.animateScale&&(i=a),t.animateRotate&&(c=a));for(var d=0;d<e.length;d++){var u=c*(e[d].value/o*(2*Math.PI));n.beginPath(),n.arc(S/2,g/2,i*s,l,l+u,!1),n.arc(S/2,g/2,i*r,l+u,l,!0),n.closePath(),n.fillStyle=e[d].color,n.fill(),t.segmentShowStroke&&(n.lineWidth=t.segmentStrokeWidth,n.strokeStyle=t.segmentStrokeColor,n.stroke()),l+=u}}for(var o=0,s=i([g/2,S/2])-5,r=s*(t.percentageInnerCutout/100),c=0;c<e.length;c++)o+=e[c].value;a(t,null,l,n)},M=function(e,o,i){function s(a){function n(n,l){return F-a*t(e.datasets[n].data[l],p,f)}function l(e){return y+w*e}for(var s=0;s<e.datasets.length;s++){i.strokeStyle=e.datasets[s].strokeColor,i.lineWidth=o.datasetStrokeWidth,i.beginPath(),i.moveTo(y,F-a*t(e.datasets[s].data[0],p,f));for(var r=1;r<e.datasets[s].data.length;r++)o.bezierCurve?i.bezierCurveTo(l(r-.5),n(s,r-1),l(r-.5),n(s,r),l(r),n(s,r)):i.lineTo(l(r),n(s,r));if(i.stroke(),o.datasetFill?(i.lineTo(y+w*(e.datasets[s].data.length-1),F),i.lineTo(y,F),i.closePath(),i.fillStyle=e.datasets[s].fillColor,i.fill()):i.closePath(),o.pointDot){i.fillStyle=e.datasets[s].pointColor,i.strokeStyle=e.datasets[s].pointStrokeColor,i.lineWidth=o.pointDotStrokeWidth;for(var c=0;c<e.datasets[s].data.length;c++)i.beginPath(),i.arc(y+w*c,F-a*t(e.datasets[s].data[c],p,f),o.pointDotRadius,0,2*Math.PI,!0),i.fill(),i.stroke()}}}function r(){i.lineWidth=o.scaleLineWidth,i.strokeStyle=o.scaleLineColor,i.beginPath(),i.moveTo(S-M/2+5,F),i.lineTo(S-M/2-L-5,F),i.stroke(),P>0?(i.save(),i.textAlign="right"):i.textAlign="center",i.fillStyle=o.scaleFontColor;for(var t=0;t<e.labels.length;t++)i.save(),P>0?(i.translate(y+t*w,F+o.scaleFontSize),i.rotate(-(P*(Math.PI/180))),i.fillText(e.labels[t],0,0),i.restore()):i.fillText(e.labels[t],y+t*w,F+o.scaleFontSize+3),i.beginPath(),i.moveTo(y+t*w,F+3),o.scaleShowGridLines&&t>0?(i.lineWidth=o.scaleGridLineWidth,i.strokeStyle=o.scaleGridLineColor,i.lineTo(y+t*w,5)):i.lineTo(y+t*w,F+3),i.stroke();i.lineWidth=o.scaleLineWidth,i.strokeStyle=o.scaleLineColor,i.beginPath(),i.moveTo(y,F+5),i.lineTo(y,5),i.stroke(),i.textAlign="right",i.textBaseline="middle";for(var a=0;a<p.steps;a++)i.beginPath(),i.moveTo(y-3,F-(a+1)*f),o.scaleShowGridLines?(i.lineWidth=o.scaleGridLineWidth,i.strokeStyle=o.scaleGridLineColor,i.lineTo(y+L+5,F-(a+1)*f)):i.lineTo(y-.5,F-(a+1)*f),i.stroke(),o.scaleShowLabels&&i.fillText(p.labels[a],y-8,F-(a+1)*f)}function c(){var t=1;if(o.scaleShowLabels){i.font=o.scaleFontStyle+" "+o.scaleFontSize+"px "+o.scaleFontFamily;for(var a=0;a<p.labels.length;a++){var n=i.measureText(p.labels[a]).width;t=n>t?n:t}t+=10}L=S-t-M,w=Math.floor(L/(e.labels.length-1)),y=S-M/2-L,F=v+o.scaleFontSize/2}function d(){h=g,i.font=o.scaleFontStyle+" "+o.scaleFontSize+"px "+o.scaleFontFamily,M=1;for(var t=0;t<e.labels.length;t++){var a=i.measureText(e.labels[t]).width;M=a>M?a:M}S/e.labels.length<M?(P=45,S/e.labels.length<Math.cos(P)*M?(P=90,h-=M):h-=Math.sin(P)*M):h-=o.scaleFontSize,h-=5,m=o.scaleFontSize,h-=m,v=h}function u(){for(var t=Number.MIN_VALUE,a=Number.MAX_VALUE,n=0;n<e.datasets.length;n++)for(var l=0;l<e.datasets[n].data.length;l++)e.datasets[n].data[l]>t&&(t=e.datasets[n].data[l]),e.datasets[n].data[l]<a&&(a=e.datasets[n].data[l]);var o=Math.floor(v/(.66*m)),i=Math.floor(v/m*.5);return{maxValue:t,minValue:a,maxSteps:o,minSteps:i}}var h,f,p,m,v,b,k,w,M,L,y,F,P=0;d(),b=u(),k=o.scaleShowLabels?o.scaleLabel:"",o.scaleOverride?(p={steps:o.scaleSteps,stepValue:o.scaleStepWidth,graphMin:o.scaleStartValue,labels:[]},l(k,p.labels,p.steps,o.scaleStartValue,o.scaleStepWidth)):p=n(v,b.maxSteps,b.minSteps,b.maxValue,b.minValue,k),f=Math.floor(v/p.steps),c(),a(o,r,s,i)},L=function(e,o,i){function s(a){i.lineWidth=o.barStrokeWidth;for(var n=0;n<e.datasets.length;n++){i.fillStyle=e.datasets[n].fillColor,i.strokeStyle=e.datasets[n].strokeColor;for(var l=0;l<e.datasets[n].data.length;l++){var s=y+o.barValueSpacing+w*l+P*n+o.barDatasetSpacing*n+o.barStrokeWidth*n;i.beginPath(),i.moveTo(s,F),i.lineTo(s,F-a*t(e.datasets[n].data[l],p,f)+o.barStrokeWidth/2),i.lineTo(s+P,F-a*t(e.datasets[n].data[l],p,f)+o.barStrokeWidth/2),i.lineTo(s+P,F),o.barShowStroke&&i.stroke(),i.closePath(),i.fill()}}}function r(){i.lineWidth=o.scaleLineWidth,i.strokeStyle=o.scaleLineColor,i.beginPath(),i.moveTo(S-M/2+5,F),i.lineTo(S-M/2-L-5,F),i.stroke(),T>0?(i.save(),i.textAlign="right"):i.textAlign="center",i.fillStyle=o.scaleFontColor;for(var t=0;t<e.labels.length;t++)i.save(),T>0?(i.translate(y+t*w,F+o.scaleFontSize),i.rotate(-(T*(Math.PI/180))),i.fillText(e.labels[t],0,0),i.restore()):i.fillText(e.labels[t],y+t*w+w/2,F+o.scaleFontSize+3),i.beginPath(),i.moveTo(y+(t+1)*w,F+3),i.lineWidth=o.scaleGridLineWidth,i.strokeStyle=o.scaleGridLineColor,i.lineTo(y+(t+1)*w,5),i.stroke();i.lineWidth=o.scaleLineWidth,i.strokeStyle=o.scaleLineColor,i.beginPath(),i.moveTo(y,F+5),i.lineTo(y,5),i.stroke(),i.textAlign="right",i.textBaseline="middle";for(var a=0;a<p.steps;a++)i.beginPath(),i.moveTo(y-3,F-(a+1)*f),o.scaleShowGridLines?(i.lineWidth=o.scaleGridLineWidth,i.strokeStyle=o.scaleGridLineColor,i.lineTo(y+L+5,F-(a+1)*f)):i.lineTo(y-.5,F-(a+1)*f),i.stroke(),o.scaleShowLabels&&i.fillText(p.labels[a],y-8,F-(a+1)*f)}function c(){var t=1;if(o.scaleShowLabels){i.font=o.scaleFontStyle+" "+o.scaleFontSize+"px "+o.scaleFontFamily;for(var a=0;a<p.labels.length;a++){var n=i.measureText(p.labels[a]).width;t=n>t?n:t}t+=10}L=S-t-M,w=Math.floor(L/e.labels.length),P=(w-2*o.scaleGridLineWidth-2*o.barValueSpacing-(o.barDatasetSpacing*e.datasets.length-1)-(o.barStrokeWidth/2*e.datasets.length-1))/e.datasets.length,y=S-M/2-L,F=v+o.scaleFontSize/2}function d(){h=g,i.font=o.scaleFontStyle+" "+o.scaleFontSize+"px "+o.scaleFontFamily,M=1;for(var t=0;t<e.labels.length;t++){var a=i.measureText(e.labels[t]).width;M=a>M?a:M}S/e.labels.length<M?(T=45,S/e.labels.length<Math.cos(T)*M?(T=90,h-=M):h-=Math.sin(T)*M):h-=o.scaleFontSize,h-=5,m=o.scaleFontSize,h-=m,v=h}function u(){for(var t=Number.MIN_VALUE,a=Number.MAX_VALUE,n=0;n<e.datasets.length;n++)for(var l=0;l<e.datasets[n].data.length;l++)e.datasets[n].data[l]>t&&(t=e.datasets[n].data[l]),e.datasets[n].data[l]<a&&(a=e.datasets[n].data[l]);var o=Math.floor(v/(.66*m)),i=Math.floor(v/m*.5);return{maxValue:t,minValue:a,maxSteps:o,minSteps:i}}var h,f,p,m,v,b,k,w,M,L,y,F,P,T=0;d(),b=u(),k=o.scaleShowLabels?o.scaleLabel:"",o.scaleOverride?(p={steps:o.scaleSteps,stepValue:o.scaleStepWidth,graphMin:o.scaleStartValue,labels:[]},l(k,p.labels,p.steps,o.scaleStartValue,o.scaleStepWidth)):p=n(v,b.maxSteps,b.minSteps,b.maxValue,b.minValue,k),f=Math.floor(v/p.steps),c(),a(o,r,s,i)},y=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),F={}};